(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var c=t(2),r=t(17),o=t.n(r),a=t(8),i=t(3),u=t(4),s=t.n(u),d="/api/persons",b=function(){return s.a.get(d).then((function(e){return e.data}))},j=b,f=function(e){return s.a.post(d,e).then((function(e){return e.data}))},l=function(e){return s.a.delete("".concat(d,"/").concat(e)),b()},h=function(e){return s.a.put("".concat(d,"/").concat(e.id),e).then((function(e){return e.data}))},m=t(0),O=function(e){var n=e.id,t=e.onClick;return Object(m.jsx)("button",{onClick:function(){return t(n)},children:"Delete"})},x=function(e){var n=e.persons,t=e.filteredContact,c=e.removeContact;return""===t?Object(m.jsx)(m.Fragment,{children:n.map((function(e){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("li",{children:[e.name," ",e.number]}),Object(m.jsx)(O,{onClick:c,id:e.id})]},e.id)}))}):Object(m.jsx)(m.Fragment,{children:n.filter((function(e){return e.name.toLocaleLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("li",{children:[e.name," ",e.number]}),Object(m.jsx)(O,{onClick:c,id:e.id})]},e.id)}))})},p=function(e){var n=e.text,t=e.onChange,c=e.value;return Object(m.jsxs)("div",{children:[n," ",Object(m.jsx)("input",{onChange:t,value:c})," "]})},v=function(e){var n=e.onSubmit,t=e.getNewName,c=e.getNewNumber,r=e.newName,o=e.newNumber;return Object(m.jsxs)("form",{onSubmit:n,children:[Object(m.jsx)(p,{onChange:t,value:r,text:"name:"}),Object(m.jsx)(p,{onChange:c,value:o,text:"number"}),Object(m.jsx)("button",{type:"submit",children:"add"})]})},g=p,w=function(e){var n=e.notification;if(""===n)return null;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("p",{style:{background:"lightgrey",fontSize:24,borderRadius:10,border:"1px solid",padding:20,color:"green"},children:n})})},C=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)(""),u=Object(i.a)(o,2),s=u[0],d=u[1],b=Object(c.useState)(""),O=Object(i.a)(b,2),p=O[0],C=O[1],k=Object(c.useState)(""),N=Object(i.a)(k,2),y=N[0],S=N[1],B=Object(c.useState)(""),F=Object(i.a)(B,2),L=F[0],A=F[1];Object(c.useEffect)((function(){j().then((function(e){r(e)}))}),[]);var D=function(){if(t.find((function(e){return e.name==s})))if(t.find((function(e){return e.number==p})))alert("".concat(s," already in PhoneBook"));else{var e=t.find((function(e){return e.name===s})),n=Object(a.a)(Object(a.a)({},e),{},{number:p});E(n)}else{var c={name:s,number:p};f(c).then((function(e){r(t.concat(e)),A("".concat(c.name," was added to your phonebook"))})).catch((function(e){console.log(e.response.data),A("".concat(e.response.data.error))})),J()}},E=function(e){h(e).then((function(e){r(t.map((function(n){return n.id!==e.id?n:e}))),A("".concat(e.name," was added to your phonebook"))})).catch((function(e){A("".concat(e.response.data.error))})),J()},J=function(){d(""),C(""),setTimeout((function(){A("")}),3e3)};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(w,{notification:L}),Object(m.jsx)(g,{onChange:function(e){return S(e.target.value)},value:y,text:"Show By:"}),Object(m.jsx)("h2",{children:"Add Contacts"}),Object(m.jsx)(v,{onSubmit:function(e){e.preventDefault(),""===s||""===p?alert("You must fill all fields"):D()},getNewName:function(e){return d(e.target.value)},getNewNumber:function(e){return C(e.target.value)},newName:s,newNumber:p}),Object(m.jsx)("h2",{children:"Numbers"}),Object(m.jsx)(x,{persons:t,filteredContact:y,removeContact:function(e){window.confirm("Are you sure you want to remove this contact?")&&l(e).then((function(n){r(n.filter((function(n){return n.id!==e})))}))}}),"..."]})};o.a.render(Object(m.jsx)(C,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.9d2884cc.chunk.js.map